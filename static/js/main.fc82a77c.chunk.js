(window["webpackJsonpimage-editor"]=window["webpackJsonpimage-editor"]||[]).push([[0],{31:function(e,t,n){e.exports=n(47)},36:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(17),c=n.n(i),o=(n(36),n(14)),s=n(27),l=function(e){return{type:"UPLOAD_IMAGE",imgSrc:e}},m=function(){return{type:"RESIZE_ALL_IMAGES"}},u=function(e,t){return function(n){n(function(e){return{type:"SEND_SAVE_REQUEST",imageType:e}}(e));var a=new FormData;fetch(t).then(function(e){return e.blob()}).then(function(t){var r=new File([t],"File name");return a.append("image",r),fetch("https://api.imgur.com/3/image",{method:"POST",headers:{Authorization:"Client-ID 7a775a29de38d93"},body:a}).then(function(e){return e.json()}).then(function(t){console.log(t),n(function(e,t){return{type:"RECEIVE_SAVE_RESPONSE",imageType:e,imageLink:t}}(e,t.data.link))})}),console.log("inside save")}},g=function(e){return new Promise(function(t,n){var a=new FileReader;a.onload=function(e){t(e.target.result)},a.readAsDataURL(e)})},h=function(e,t,n){return new Promise(function(a,r){var i=document.createElement("canvas");i.width=t,i.height=n,i.getContext("2d").drawImage(e,0,0),a(i)})},d=function(e){return new Promise(function(t,n){t(e.toDataURL("image/png"))})};function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach(function(t){Object(s.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var E={currentImageSrc:"",resizedImages:[{type:"horizontal",width:755,height:450,imgSrc:"",link:"",isSaving:!1},{type:"vertical",width:365,height:450,imgSrc:"",link:"",isSaving:!1},{type:"horizontal_small",width:365,height:212,imgSrc:"",link:"",isSaving:!1},{type:"gallery",width:380,height:380,imgSrc:"",link:"",isSaving:!1}]},v=Object(o.c)({imageInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,n=[];switch(t.type){case"UPLOAD_IMAGE":return console.log(t),f({},e,{currentImageSrc:t.imgSrc});case"RESIZE_ALL_IMAGES":var a=new Image;return a.src=e.currentImageSrc,e.resizedImages.forEach(function(e){h(a,e.width,e.height).then(function(t){d(t).then(function(t){n.push(f({},e,{imgSrc:t}))})})}),console.log("resized",n),f({},e,{resizedImages:n});case"SEND_SAVE_REQUEST":return n=[],e.resizedImages.forEach(function(e){e.type===t.imageType?(u(e),n.push(f({},e,{isSaving:!0}))):n.push(e)}),f({},e,{resizedImages:n});case"RECEIVE_SAVE_RESPONSE":return n=[],e.resizedImages.forEach(function(e){e.type===t.imageType?n.push(f({},e,{isSaving:!1,link:t.imageLink})):n.push(e)}),f({},e,{resizedImages:n});default:return e}}}),b=n(7),S=n(9),O=n(10),I=n(12),w=n(11),y=n(13),j=(n(41),function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(I.a)(this,Object(w.a)(t).call(this,e))).handleChange=function(e){g(e.target.files[0]).then(function(e){n.validateImage(e).then(function(t){t&&(n.setState({isValidImage:!0}),n.props.dispatch(l(e)))}).catch(function(e){n.setState({isValidImage:!1})})})},n.validateImage=function(e){var t=new Image;return new Promise(function(a,r){t.src=e,t.onload=function(){t.width!==n.props.requiredWidth||t.height!==n.props.requiredHeight?r(!1):(console.log("valid size"),a(!0))}})},n.state={isValidImage:""},n}return Object(y.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this;return console.log("image selector rendering"),r.a.createElement("div",{className:"container image-selector"},r.a.createElement("div",{className:"file-upload-wrapper"},r.a.createElement("button",{className:"btn"},"Upload an Image"),r.a.createElement("input",{type:"file",name:"image",className:"image-selector__input",accept:"image/*",onChange:function(t){t.persist(),e.handleChange(t)}})),!1===this.state.isValidImage&&r.a.createElement("div",null,"Image size should be ",this.props.requiredWidth," * ",this.props.requiredHeight))}}]),t}(a.Component)),_=Object(b.b)()(j),k=n(20),z=(n(42),function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(I.a)(this,Object(w.a)(t).call(this,e))).handleResize=function(){n.props.currentImageSrc&&(n.props.dispatch(m()),n.setState({isImageResized:!0}))},n.state={isImageResized:!1,error:""},n}return Object(y.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return console.log("image resizer rendering"),r.a.createElement("div",{class:"container image-resizer"},r.a.createElement("div",{class:"container image-resizer__actions"},r.a.createElement(_,{requiredWidth:1024,requiredHeight:1024}),this.props.currentImageSrc&&r.a.createElement("button",{className:"btn",onClick:this.handleResize},"Resize"),this.state.isImageResized&&r.a.createElement("button",{className:"btn"},r.a.createElement(k.b,{to:"/gallery"},"View Resized Images"))),this.props.currentImageSrc&&r.a.createElement("div",{className:"image-resizer__image"},r.a.createElement("img",{src:this.props.currentImageSrc})))}}]),t}(a.Component)),N=Object(b.b)(function(e){return{currentImageSrc:e.imageInfo.currentImageSrc}})(z),R=(n(44),function(e){function t(){var e,n;Object(S.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).handleSave=function(e,t){n.props.dispatch(u(e,t))},n}return Object(y.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.props.imageInfo;return r.a.createElement("div",{className:"container image-container"},r.a.createElement("div",{className:"image-container__image"},r.a.createElement("img",{src:t.imgSrc})),r.a.createElement("div",{class:"image-container__save"},r.a.createElement("button",{className:t.isSaving?"btn btn_disabled":"btn",onClick:function(){e.handleSave(t.type,t.imgSrc)}},"Save")),t.link&&r.a.createElement("div",{className:"image-container__link"},"Image Link: ",r.a.createElement("a",{href:t.link},t.link)),t.isSaving&&r.a.createElement("div",{className:"loader"},r.a.createElement("p",null,"Saving Image...")))}}]),t}(a.Component)),P=Object(b.b)()(R),A=(n(45),function(e){function t(e){return Object(S.a)(this,t),Object(I.a)(this,Object(w.a)(t).call(this,e))}return Object(y.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container image-gallery"},this.props.images.map(function(e,t){return""==e.imgSrc&&(window.location.hash="#/"),r.a.createElement(P,{imageInfo:e,key:t})}))}}]),t}(a.Component)),D=Object(b.b)(function(e){return{images:e.imageInfo.resizedImages}})(A);var C=function(){return r.a.createElement("div",{className:"header"},r.a.createElement("div",null,"IMAGE EDITOR"))},L=n(15),V=n(30),T=(n(46),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d),U=Object(o.e)(v,T(Object(o.a)(V.a)));var q=function(){return r.a.createElement(b.a,{store:U},r.a.createElement(C,null),r.a.createElement("div",{className:"App"},r.a.createElement(k.a,null,r.a.createElement(L.a,{exact:!0,path:"/",component:N}),r.a.createElement(L.a,{exact:!0,path:"/gallery",component:D}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[31,1,2]]]);
//# sourceMappingURL=main.fc82a77c.chunk.js.map